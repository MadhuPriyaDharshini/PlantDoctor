<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="bootstrap-5.2.2-dist/css/bootstrap-grid.min.css">
  <link rel="stylesheet" href="bootstrap-5.2.2-dist/css/bootstrap.min.css" id="bootstrap-css">
  <link rel="stylesheet" href="MDB5-STANDARD-UI-KIT-Free-5.0.0/css/mdb.min.css">
  <link rel="stylesheet" href="feed.css">
</head>

<body>

  <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">
        <img src="farmer_frd.jpeg" alt="Logo" style="width:40px;" class="rounded-pill">
      </a>
      <div className="bn40div">
        <a class="bn40" href="/">FARMEX</a>
      </div>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mynavbar">
        <span class="navbar-toggler-icon"></span>
      </button>


      <ul class="navbar-nav me-auto mb-2 mb-lg-0">

        <li class="nav-item ">
          <a href="/" class="nav-link text-white px-1 py-1 navbar-bold-markup" alt="Link to Welcome to the Zoo Page"
            title="Link to Welcome to the Zoo Page" aria-label="Link to Welcome to the Zoo Page"></a></a>

        </li>
        <li class="nav-item">
          <a href="/"><button class="bn-32 bn32">Feedback</button></a>
        </li>
        <li class="nav-item">
        <li>
          <a href="Help.html"><button class="bn-32 bn32">Help</button></a>
        </li>
      </ul>
      <form class="d-flex">
        <div id="google_translate_element"></div>
      </form>
    </div>
    </div>

  </nav>
  <div class="header">


    <div class="inner-header flex">

      <div class="container-fluid gedf-wrapper">
        <div class="row">
          <div class="col-md-3">
            <div class="card">
              <div class="card-body">
                <div class="h5" id="name"></div>
                <div class="h7 text-muted" id="name1">Fullname : Miracles Lee Cross</div>

              </div>
              <ul class="list-group list-group-flush">
                <li class="list-group-item">
                  <div class="h6 text-muted">Farmer's feed</div>
                  <div class="h5" id="NumOfQueries"></div>
                </li>
                <li class="list-group-item">
                  <div class="h6 text-muted"></div>
                  <div class="h5"></div>
                </li>
                <li class="list-group-item">Designation</li>
              </ul>
            </div>
          </div>
          <div class="col-md-6 gedf-main" id="Row1">

            <!--- \\\\\\\Post-->
            <div class="card gedf-card">
              <div class="card-header">
                <ul class="nav nav-tabs card-header-tabs" id="myTab" role="tablist">
                  <li class="nav-item">
                    <a class="nav-link active" id="posts-tab" data-toggle="tab" href="viewquery.html" role="tab"
                      aria-controls="posts" aria-selected="true">
                      Posted Queries</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" id="images-tab" data-toggle="tab" role="tab" aria-controls="images"
                      aria-selected="false" href="#images"></a>
                  </li>
                </ul>
              </div>
              <div class="card-body">
                <div class="tab-content" id="myTabContent">
                  <div class="tab-pane fade show active" id="posts" role="tabpanel" aria-labelledby="posts-tab">
                    <div class="popup">
                      <label class="sr-only" for="message"></label>
                      <a href="postquery.html" class="popup-button">POST YOUR Suggestion</a>
                      <br><br>
                    </div>

                  </div>

                </div>

              </div>
            </div>

            <div class="card gedf-card" id="FeedCard">
              <div class="card-header">
                <div class="d-flex justify-content-between align-items-center">
                  <div class="d-flex justify-content-between align-items-center">

                    <div class="ml-2">
                      <div class="h5 m-0" id="UserName0"></div>
                      <div class="h7 text-muted" id="FullName0">Miracles Lee Cross</div>

                    </div>
                  </div>

                </div>

              </div>
              <div class="card-body">
                <div class="text-muted h7 mb-2"> <i class="fa fa-clock-o" id="Time"></i></div>
                <a class="card-link" href="#">
                  <h5 class="card-title" id="Question0">Lorem ipsum dolor sit amet, consectetur adip.</h5>
                </a>

                <p class="card-text" id="Solution0">
                  Lorem ipsum dolor sit amet consectetur adipisicing elit. Quo recusandae nulla rem eos ipsa praesentium
                  esse magnam nemo dolor
                  sequi fuga quia quaerat cum, obcaecati hic, molestias minima iste voluptates.
                </p>

                <img class="img-fluid rounded mb-3" alt="farmex.jpg" id="image0" style="text-align: center;" />

              </div>
              <div class="card-footer">
                <a href="#" class="card-link"><i class="fa fa-gittip"></i> Upvote</a>
                <a href="#" class="card-link"><i class="fa fa-comment"></i> Downvote</a>
                <a href="#" class="card-link"><i class="fa fa-mail-forward"></i> Comment </a>
              </div>
              <div class="card-footer">

                <form id="answers0">
                  <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp"
                    placeholder="Type your answer here" name="Answers">
                  <br>
                  <div class="sm-3">
                    <input type="submit" class="btn btn-primary btn-block mb-4"></input>
                  </div>
                </form>
              </div>
            </div>




          </div>
        </div>
      </div>
    </div>
  </div>
  <script defer>
    fetch("http://localhost:3000/api1/viewquery")
      .then(response => response.json())
      .then(data => {
        const Data1 = JSON.stringify(data);
        console.log(Data1);
        if (data) {
          window.localStorage.setItem('data1', Data1);
        }
      })

    const DATA = window.localStorage.getItem('data1');
    const DATA1 = JSON.parse(DATA);
    console.log(DATA1);
    const image1 = [];

    for (let j = 0; j < DATA1.length - 1; j++) {
      const parentDiv = document.getElementById('FeedCard');
      const cloneOfParentDiv = parentDiv.cloneNode(true);
      const UpdatedIdofParentDiv = "FeedCard" + j;
      cloneOfParentDiv.id = UpdatedIdofParentDiv;
      parentDiv.parentNode.appendChild(cloneOfParentDiv);
      const cloneChilds = document.getElementById(UpdatedIdofParentDiv).childNodes;
      console.log(cloneChilds);
      const a = j + 1
      cloneChilds[1].childNodes[1].childNodes[1].childNodes[1].childNodes[1].id = "UserName" + a;
      cloneChilds[1].childNodes[1].childNodes[1].childNodes[1].childNodes[3].id = "FullName" + a;
      cloneChilds[3].childNodes[3].childNodes[1].id = "Question" + a;
      cloneChilds[3].childNodes[5].id = "Solution" + a;
      cloneChilds[3].childNodes[7].id = "image" + a;
      cloneChilds[7].childNodes[1].id = "answers" + a;

    }

    for (let j = 0; j < DATA1.length; j++) {
      image1[j] = btoa(String.fromCharCode(...new Uint8Array(DATA1[j].image.data.data)));
      document.getElementById('UserName' + j).innerHTML = DATA1[j].username;
      document.getElementById('FullName' + j).innerHTML = DATA1[j].username;
      document.getElementById('Question' + j).innerHTML = DATA1[j].question;
      document.getElementById('Solution' + j).innerHTML = DATA1[j].description;
      document.getElementById('image' + j).src = "data:image/jpg;base64," + image1[j];
    }

    

    const name = window.localStorage.getItem('data');
    document.getElementById('name').innerHTML = name;
    const name1 = window.localStorage.getItem('data');
    document.getElementById('name1').innerHTML = name1;
  </script>



  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js"
    integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk"
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="bootstrap-5.2.2-dist/js/bootstrap.min.js">   </script>
  <script src="MDB5-STANDARD-UI-KIT-Free-5.0.0/js/mdb.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/5.0.0/mdb.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>
  <script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({ pageLanguage: 'en' }, 'google_translate_element');
    }
  </script>
  <script type="text/javascript"
    src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</body>

</html>